var linkStrikes = parseInt(localStorage.getItem("linkStrikes")) || 0;

if (window.location.href.indexOf("youtube") === -1)	{
	setInterval(changeLinks, 2000);
	changeLinks();
}

function changeLinks() {
	let links = document.getElementsByTagName('a');
	for (let i = 0; i < links.length; i++)
		if (!links[i].dataset.broken)	{
			let currLink = links[i].href;
			links[i].href = removeRandom(currLink);
			if (currLink !== links[i].href) {
				links[i].dataset.broken = true;
				links[i].addEventListener('click', function ()	{
					linkStrikes++;
					localStorage.setItem("linkStrikes", linkStrikes);
					window.confirm("Ofek strikes again!");
				});
			}
		}
}

function removeRandom(str) {
	let random = Math.floor(Math.random() * str.length);
	return str.substring(0, random) + str.substring(random + 1);
}
